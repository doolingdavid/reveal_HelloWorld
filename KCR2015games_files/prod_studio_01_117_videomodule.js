self.studioLoader.context.evalInContext("var tl=function(a){return(a=a.exec(jb))?a[1]:\"\"};(function(){if(Cg)return tl(/Firefox\\/([0-9.]+)/);if(C||Nb||Mb)return Wb;if(Gg)return tl(/Chrome\\/([0-9.]+)/);if(Hg&&!(Lb()||A(\"iPad\")||A(\"iPod\")))return tl(/Version\\/([0-9.]+)/);if(Dg||Eg){var a=/Version\\/(\\S+).*Mobile\\/(\\S+)/.exec(jb);if(a)return a[1]+\".\"+a[2]}else if(Fg)return(a=tl(/Android\\s+([0-9.]+)/))?a:tl(/Version\\/([0-9.]+)/);return\"\"})();var ul={},vl=/OS (\\S+) like/,wl=/Android (\\S+);/,xl=function(a,b){if(null==ul[b]){var c=a.exec(jb);c?(c=c[1].replace(/_/g,\".\"),ul[b]=0<=Ja(c,b)):ul[b]=!1}return ul[b]};var yl=function(){I.call(this);this.f=this.i=this.c=!1;this.b=0;this.h=[];this.m=!1};x(yl,I);var zl=function(a,b){null==b||a.c||(a.a=b,a.v=!Dg&&!Eg,a.s=Dg||Eg,a.v?a.a.addEventListener(\"click\",v(a.j,a),!1):a.s&&(a.a.addEventListener(\"touchstart\",v(a.H,a),!1),a.a.addEventListener(\"touchmove\",v(a.G,a),!1),a.a.addEventListener(\"touchend\",v(a.A,a),!1)),a.c=!0)},Al=function(a){null!=a.a&&a.c&&(a.c=!1,a.v?a.a.removeEventListener(\"click\",v(a.j,a),!1):a.s&&(a.a.removeEventListener(\"touchstart\",v(a.H,a),!1),a.a.removeEventListener(\"touchmove\",v(a.G,a),!1),a.a.removeEventListener(\"touchend\",v(a.A,a),!1)))};yl.prototype.H=function(a){this.i=!0;this.b=a.touches.length;this.m=Bl(this,a.touches)||1!=a.touches.length;Cl(this,a.touches)};yl.prototype.G=function(a){this.f=!0;this.b=a.touches.length};yl.prototype.A=function(a){this.i&&1==this.b&&!this.f&&!this.m&&Bl(this,a.changedTouches)&&this.dispatchEvent(new H(\"click\"));this.b=a.touches.length;0==this.b&&(this.f=this.i=!1)};yl.prototype.j=function(){this.dispatchEvent(new H(\"click\"))};var Cl=function(a,b){a.h=[];y(b,function(a){var b=this.h;a=a.identifier;0<=Ma(b,a)||b.push(a)},a)},Bl=function(a,b){return Oa(b,function(a){return 0<=Ma(this.h,a.identifier)},a)};var Dl=function(a){H.call(this,a)};x(Dl,H);var El=function(){I.call(this)};x(El,I);var Fl=function(){I.call(this);this.f=new B;this.h=new yl;this.j=\"none\"};x(Fl,I);var Il=function(a){this.width=Gl(a).width;this.height=Gl(a).height;this.c=!1;this.b=a.a.muted;this.a=Hl(a);this.volume=a.a.volume};Il.prototype.muted=function(a,b){return!this.b&&a||0<this.volume&&0==b};Fl.prototype.l=function(){Jl(this);Fl.o.l.call(this)};var Jl=function(a){null!=a.b&&a.b.dispose();null!=a.i&&a.i.dispose();null!=a.a&&Kl(a.a);a.f.clear();Al(a.h)},W=function(a,b,c){c&&null!=a.f.get(b)||(a.f.set(b,!0),a.dispatchEvent(new Dl(b)))},Ll=function(a,b){null!=a.f.get(b)&&Gb(a.f,b)};g=Fl.prototype;g.wd=function(){var a;a:{var b=this.a;if(b.a.seeking&&!b.i)b.i=!0,b.h=Ml(b);else{if(!b.a.seeking&&b.i){b.i=!1;a=0!=b.a.currentTime&&b.a.currentTime<b.h;b.h=-1;break a}if(!b.a.seeking&&0!=b.a.currentTime&&Ml(b)>b.a.currentTime){a=.5<Ml(b)-b.a.currentTime;break a}}a=!1}b=Nl(this.a);if(a&&(W(this,\"rewind\",!1),-1!=b)){Ol(this.a,.75*b)||Ll(this,\"thirdquartile\");Ol(this.a,.5*b)||Ll(this,\"midpoint\");Ol(this.a,.25*b)||Ll(this,\"firstquartile\");a:{a=this.a;for(var c=a.c.F(),d=c.length-1;0<=d;d--)if(.5>c[d]){c=a.c;c=0==c.P()?null:c.get(c.P()-1);a.c.clear();.5<=c&&a.c.add(c);a=!0;break a}a=!1}a&&W(this,\"replay\",!1)}-1!=b&&(Ol(this.a,.25*b)&&W(this,\"firstquartile\",!0),Ol(this.a,.5*b)&&W(this,\"midpoint\",!0),Ol(this.a,.75*b)&&W(this,\"thirdquartile\",!0))};g.vd=function(){W(this,\"creativeview\",!0);null!=this.m?(this.b.u(this.h,\"click\",this.qd,!1),zl(this.h,this.m)):this.b.u(this.a,\"click\",this.Xd);W(this,\"start\",!0);(this.a.a.muted||0==this.a.a.volume)&&W(this,\"mute\",!1)};g.xd=function(){var a=this.a.a.muted,b=this.a.a.volume,c=this.c;c.b&&!a||!a&&0==c.volume&&0<b?W(this,\"unmute\",!1):this.c.muted(a,b)&&W(this,\"mute\",!1);this.c.b=a;this.c.volume=b};g.ud=function(){if(this.a.a.ended)W(this,\"complete\",!0);else{var a;if(a=\"pausedAtBeginning\"==this.j)a=this.a,a=!isNaN(a.a.duration)&&0<a.a.duration&&0==a.a.currentTime;a?W(this,\"stop\",!0):Pl(this.a)&&!this.a.a.seeking&&(this.c.c=!0,W(this,\"pause\",!1))}};g.Wd=function(){this.c.c&&(this.c.c=!1,W(this,\"resume\",!1))};g.rd=function(){var a;a=this.a;if(!Fg||Fg&&xl(wl,2.3))a=!0;else{var b=a.a.duration-Ml(a);a=0==a.a.currentTime&&1.5>=b}a?\"pausedAtEnd\"==this.j&&Pl(this.a)?W(this,\"stop\",!0):W(this,\"complete\",!0):this.a.a.pause()};g.qd=function(){W(this,\"click\",!1)};g.sd=function(){W(this,\"error\",!1)};g.Xd=function(){W(this,\"click\",!1)};g.$b=function(){this.c.a=!0;W(this,\"fullscreen\",!1)};g.Zb=function(){this.c.a=!1};g.Vd=function(){var a=Gl(this.a),b=Hl(this.a),c=this.c;if(a.width!=c.width||a.height!=c.height)!this.c.a&&b?this.$b():this.c.a&&!b&&this.Zb(),this.c.width=a.width,this.c.height=a.height};var Ql=function(a){this.b=0;this.c=a||100;this.a=[]};g=Ql.prototype;g.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%this.c;return b};g.get=function(a){a=Rl(this,a);return this.a[a]};g.set=function(a,b){a=Rl(this,a);this.a[a]=b};g.P=function(){return this.a.length};g.na=function(){return 0==this.a.length};g.clear=function(){this.b=this.a.length=0};g.F=function(){for(var a=this.P(),b=this.P(),c=[],a=this.P()-a;a<b;a++)c.push(this.get(a));return c};g.M=function(){for(var a=[],b=this.P(),c=0;c<b;c++)a[c]=c;return a};g.J=function(a){return a<this.P()};g.za=function(a){for(var b=this.P(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var Rl=function(a,b){if(b>=a.a.length)throw Error(\"Out of bounds exception\");return a.a.length<a.c?b:(a.b+Number(b))%a.c};var X=function(a){this.message=a};new X(\"Unable to request ads from server. Cause: {0}.\");new X(\"Cannot parse the {0} value for the adslist response: {1}.\");new X(\"The ad slot is not fully visible on the page.\");new X(\"Invalid usage of the API. Cause: {0}\");new X(\"Companion ad failed to load.\");new X(\"There was a problem requesting ads from the server.\");new X(\"The provide ad type: {0} is not supported.\");new X(\"The provided {0} information: {1} is invalid.\");new X(\"The companion ad content was invalid.\");new X(\"The overlay ad content was invalid.\");new X(\"The response does not contain any valid ads.\");new X(\"The overlay ad content could not be rendered.\");new X(\"The overlay ad content could not be repositioned.\");new X(\"Required fields in ads request object: {0} not found.\");new X(\"The publisher doesn't have permission to access the method:{0}\");new X(\"Ad response could not be understood.\");new X(\"The ad playlist response was malformed or empty.\");new X(\"There was an error continuing the content from where it was paused. Restarting content instead.\");new X(\"The ad response was not understood and cannot be parsed: {0}\");new X(\"An unexpected error occurred and the cause is not known. Refer to the inner error for more info.\");new X(\"Found unknown fields in ads request object: {0}\");new X(\"The ad response contains unexpected element. Cause {0}.\");new X(\"Listener for at least one of the required vast events was not added:{0}\");new X(\"Linear assets were found in the VAST ad response, but none of them matched the video player's capabilities.\");new X(\"Nonlinear assets were found in the VAST ad response, but none of them matched the video player's capabilities.\");new X(\"No assets were found in the VAST ad response.\");new X(\"VAST response was malformed and could not be parsed.\");new X(\"Unable to parse VAST duration: {0}\");new X(\"The maximum number of VAST wrappers ({0}) have been reached.\");new X('Expected {0} but got \"{1}\"');new X(\"Unknown node in <{0}>: {1}\");new X(\"Invalid VAST resource type: {0}\");new X(\"A video element must be provided to the VideoAdsManager.\");new X(\"Another VideoAdsManager is still using the <video>. It must be unloaded before another ad can play on the same element.\");new X(\"There was an error playing the video ad.\");var Sl=function(a){I.call(this);this.a=a;this.c=new Ql(4);this.h=-1;this.j=this.i=!1};x(Sl,El);var Nl=function(a){return isNaN(a.a.duration)?-1:a.a.duration},Pl=function(a){return a.a.paused?Dg||Eg||Gg?a.a.currentTime<a.a.duration:!0:!1},Hl=function(a){return Dg?a.a.webkitSupportsFullscreen&&a.a.webkitDisplayingFullscreen:a.a.offsetWidth>=document.body.offsetWidth&&a.a.offsetHeight>=document.body.offsetHeight},Ol=function(a,b){return Ml(a)>=b},Ml=function(a){for(a=a.c.F();a.length;){var b=a.pop();if(0<b)return b}return-1},Gl=function(a){return new ac(a.a.offsetWidth,a.a.offsetHeight)};Sl.prototype.l=function(){Sl.o.l.call(this);Kl(this)};var Kl=function(a){null!=a.f&&(Al(a.f),a.f=null);null!=a.b&&(a.b.dispose(),a.b=null);a.h=-1;a.j=!1;a.i=!1;a.c.clear()},Tl=function(a){a.j||(a.j=!0,a.dispatchEvent(\"start\"),!Fg&&(!Dg||(Dg||Eg)&&xl(vl,4))||a.ac())};g=Sl.prototype;g.Ud=function(){Hg&&(this.a.currentTime=.001)};g.gc=function(){this.dispatchEvent(\"play\");Dg||Eg||Tl(this)};g.Dd=function(){this.j||((Dg||Eg)&&0<this.a.currentTime&&Tl(this),Pb&&this.gc());this.c.add(this.a.currentTime);this.dispatchEvent(\"timeUpdate\")};g.Ed=function(){this.dispatchEvent(\"volumeChange\")};g.Cd=function(){this.dispatchEvent(\"pause\")};g.zd=function(){this.dispatchEvent(\"end\")};g.ac=function(){this.dispatchEvent(\"beginFullscreen\")};g.Bd=function(){this.dispatchEvent(\"endFullscreen\")};g.Ad=function(){this.dispatchEvent(\"error\")};g.yd=function(){this.dispatchEvent(\"click\")};var Ul={},Vl=function(a){this.j=a;this.f=this.g=!0;this.c=new Fl;this.c.j=\"pausedAtBeginning\";this.h=this.a=this.b=null;yh(v(this.Y,this))},Wl=new B;Vl.prototype.v=!1;Vl.prototype.m=!1;Vl.prototype.i=!0;var Xl=function(a){var b=Wl.get(a);null==b&&(b=new Vl(a),Wl.set(a,b));return b};Vl.prototype.Y=function(a){this.a=a;Yl(this)};var Yl=function(a){Zl(a,!1);Zl(a,!0);if(null!=a.a&&null!=a.h){var b=a.c,c=a.b;Jl(b);b.a=c;c=b.a;Kl(c);c.b=new K(c);c.b.u(c.a,\"canplay\",c.Ud);c.b.u(c.a,\"ended\",c.zd);c.b.u(c.a,\"webkitbeginfullscreen\",c.ac);c.b.u(c.a,\"webkitendfullscreen\",c.Bd);c.b.u(c.a,\"pause\",c.Cd);c.b.u(c.a,\"playing\",c.gc);c.b.u(c.a,\"timeupdate\",c.Dd);c.b.u(c.a,\"volumechange\",c.Ed);c.b.u(c.a,\"error\",c.Ad);c.f=new yl;c.b.u(c.f,\"click\",c.yd,!1);zl(c.f,c.a);b.c=new Il(b.a);b.m=null;b.b=new K(b);b.b.u(b.a,\"timeUpdate\",b.wd,!1);b.b.u(b.a,\"volumeChange\",b.xd,!1);b.b.u(b.a,\"pause\",b.ud,!1);b.b.u(b.a,\"play\",b.Wd,!1);b.b.u(b.a,\"end\",b.rd,!1);b.b.u(b.a,\"beginFullscreen\",b.$b,!1);b.b.u(b.a,\"endFullscreen\",b.Zb,!1);b.b.u(b.a,\"start\",b.vd,!1);b.b.u(b.a,\"error\",b.sd,!1);b.i=new fe(1E3);Re(b.b,b.i,\"tick\",b.Vd,!1,b);b.i.start();a.b.u(\"timeUpdate\",a.zc,!1,a);a.h.paused?a.c.u(\"start\",a.Na,!1,a):a.Na()}},Zl=function(a,b){$l(a,b,\"resume\",a.Na);$l(a,b,\"replay\",a.be);$l(a,b,\"pause\",a.Zd);$l(a,b,\"stop\",a.oe);$l(a,b,\"mute\",a.Td);$l(a,b,\"unmute\",a.we);$l(a,b,\"firstquartile\",a.Uc);$l(a,b,\"midpoint\",a.Rd);$l(a,b,\"thirdquartile\",a.ue);$l(a,b,\"complete\",a.Lc)},$l=function(a,b,c,d){(b?a.c.u:a.c.Z).call(a.c,c,d,!1,a)};g=Vl.prototype;g.Na=function(){this.c.Z(\"start\",this.Na,!1,this);am(this,\"play\",!this.i);bm(this,\"Start\");this.i=!1;null!=this.a&&this.f&&!this.v&&(this.a.m(),this.v=!0)};g.be=function(){am(this,\"replay\",!0);bm(this,\"Stop\");this.g=!1};g.Zd=function(){am(this,\"pause\",!0);bm(this,\"Stop\")};g.oe=function(){am(this,\"stop\",!0);bm(this,\"Stop\");this.g=!1};g.Td=function(){am(this,\"mute\",!this.i)};g.we=function(){am(this,\"unmute\",!this.i)};g.Uc=function(){am(this,\"firstquartile\")};g.Rd=function(){am(this,\"midpoint\")};g.ue=function(){am(this,\"thirdquartile\")};g.Lc=function(){am(this,\"complete\");bm(this,\"Stop\");this.g=!1;null!=this.a&&this.f&&!this.m&&(this.a.m(),this.m=!0)};g.zc=function(a){this.a.w.B(\"updateVideoProgress\",[\"EVENT_VIDEO_\"+a.type.toUpperCase(),Nl(this.b),this.b.a.currentTime])};var am=function(a,b,c){null!=a.a&&a.f&&(c&&og(a.a.b,\"Count\",a.j,\"EVENT_VIDEO_INTERACTION\"),og(a.a.b,\"Count\",a.j,\"EVENT_VIDEO_\"+b.toUpperCase()))},bm=function(a,b){null!=a.a&&a.f&&a.g&&og(a.a.b,b,a.j,\"EVENT_VIDEO_VIEW_TIMER\")};var cm=function(a){F.call(this);this.c=a;this.a={};this.b=null;yh(v(this.g,this))};x(cm,F);m(\"studio.video.Reporter\",cm,void 0);var dm=new B,em=function(a,b,c){var d=Xl(a);\"boolean\"==typeof c&&(d.i=c);Jl(d.c);d.g=!0;d.f=!0;d.h=b;d.b=new Sl(d.h);Yl(d);dm.J(a)||dm.set(a,new cm(b))};cm.attach=em;cm.prototype.g=function(a){this.b=a;this.b.Db(this.c)};cm.prototype.l=function(){for(var a in this.a)this.c[a]=this.a[a];cm.o.l.call(this)};var fm=function(a){a=Xl(a);null==a.b||Pl(a.b)||a.b.a.ended||(am(a,\"stop\",!1),bm(a,\"Stop\"),a.g=!1);Zl(a,!1);a.f=!1;a.h=null;Jl(a.c);a.b&&(a.b.Z(\"timeUpdate\",a.zc,!1,a),a.b.dispose())};cm.detach=fm;var gm=function(){};var hm,im=function(){};x(im,gm);var jm=function(a){var b;a:{if(!a.a&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var c=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],d=0;d<c.length;d++){var e=c[d];try{new ActiveXObject(e);b=a.a=e;break a}catch(f){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");}b=a.a}return b?new ActiveXObject(b):new XMLHttpRequest};hm=new im;var lm=function(a,b){var c=b||{};c.responseType=\"blob\";return km(\"GET\",a,c).then(function(a){return a.response})},km=function(a,b,c){return new Kc(function(d,e){var f=c||{},k,n=f.Ae?jm(f.Ae):jm(hm);try{n.open(a,b,!0)}catch(gb){e(new mm(\"Error opening XHR: \"+gb.message,b))}n.onreadystatechange=function(){if(4==n.readyState){h.clearTimeout(k);var a;a:switch(n.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:a=!0;break a;default:a=!1}!a&&(a=0===n.status)&&(a=b.match(bf)[1]||null,!a&&h.self&&h.self.location&&(a=h.self.location.protocol,a=a.substr(0,a.length-1)),a=a?a.toLowerCase():\"\",a=!(\"http\"==a||\"https\"==a||\"\"==a));a?d(n):e(new nm(n.status,b))}};n.onerror=function(){e(new mm(\"Network error\",b))};var G;if(f.headers){for(var Z in f.headers)G=f.headers[Z],null!=G&&n.setRequestHeader(Z,G);G=f.headers[\"Content-Type\"]}Z=h.FormData&&!1;\"POST\"!=a||void 0!==G||Z||n.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");f.withCredentials&&(n.withCredentials=f.withCredentials);f.responseType&&(n.responseType=f.responseType);f.Sd&&n.overrideMimeType(f.Sd);0<f.ve&&(k=h.setTimeout(function(){n.onreadystatechange=ba;n.abort();e(new om(b))},f.ve));try{n.send(null)}catch(gb){n.onreadystatechange=ba,h.clearTimeout(k),e(new mm(\"Error sending XHR: \"+gb.message,b))}})},mm=function(a,b){pa.call(this,a+\", url=\"+b);this.url=b};x(mm,pa);mm.prototype.name=\"XhrError\";var nm=function(a,b){mm.call(this,\"Request Failed, status=\"+a,b)};x(nm,mm);nm.prototype.name=\"XhrHttpError\";var om=function(a){mm.call(this,\"Request timed out\",a)};x(om,mm);om.prototype.name=\"XhrTimeoutError\";m(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return zh().then(function(b){b=b.Aa(a);return\"file:\"==window.location.protocol?Oc(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):Ca(b,\"/itag/\")?pm(qm(b)).then(lm):lm(b)})},void 0);var pm=function(a){return km(\"HEAD\",a).then(function(b){return rm(b)?km(\"GET\",a).then(function(a){return pm(a.response)}):a})},qm=function(a){return Ca(a,\"/itag/\")&&!Ca(a,\"/alr/yes/\")?(a=a.split(\"/\"),a.splice(a.length-2,0,\"alr\",\"yes\"),a.join(\"/\")):a},rm=function(a){a=a.getResponseHeader(\"Content-Type\");return Ca(a,\"text/plain\")};");
